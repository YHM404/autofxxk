# 配置文件示例
# 复制此文件为 config.yaml 并根据需要修改

# 模型配置
# 支持的 provider: "openai", "anthropic", "openai-compatible", "anthropic-compatible"
models:
  # === 示例 1: 使用 OpenAI（默认）===
  default:
    provider: "openai"
    id: "gpt-4o" # 可选: gpt-4o, gpt-4, gpt-3.5-turbo
    temperature: 0.7 # 0-1，越高越有创造性
    api_key: null # 优先使用环境变量 OPENAI_API_KEY
    base_url: null # 可选，自定义 API 端点
    max_tokens: null

  # === 示例 2: 使用 Anthropic Claude（推荐启用 prompt caching）===
  # default:
  #   provider: "anthropic"
  #   id: "claude-sonnet-4-20250514"  # claude-sonnet-4, claude-opus-4, claude-haiku
  #   temperature: 0.7
  #   max_tokens: 8192        # Claude 建议设置 max_tokens
  #   api_key: null           # 环境变量 ANTHROPIC_API_KEY
  #   cache_system_prompt: true  # 启用 prompt caching，可节省 90% 的 token 成本！

  # === 示例 3: 使用兼容 OpenAI API 的第三方服务 ===
  # default:
  #   provider: "openai-compatible"
  #   id: "your-model-name"
  #   base_url: "https://api.example.com/v1"
  #   api_key: null           # 或设置环境变量
  #   temperature: 0.7
  #   max_tokens: 4096

  # === 示例 4: 使用兼容 Anthropic API 的第三方服务 ===
  # default:
  #   provider: "anthropic-compatible"
  #   id: "claude-model-name"
  #   base_url: "https://your-api.com"
  #   api_key: null
  #   temperature: 0.7
  #   max_tokens: 8192

  # === 为不同 Agent 配置不同模型 ===
  # technical_analysis:
  #   provider: "openai"
  #   id: "gpt-4o"
  #   temperature: 0.5 # 技术分析更客观

  # macro_analysis:
  #   provider: "openai"
  #   id: "gpt-4o"
  #   temperature: 0.7

  # fundamental_analysis:
  #   provider: "openai"
  #   id: "gpt-4o"
  #   temperature: 0.6

  # team_leader:
  #   provider: "openai"
  #   id: "gpt-4o"
  #   temperature: 0.7

  # === 混合使用示例 ===
  # technical_analysis:
  #   provider: "anthropic"
  #   id: "claude-3-5-haiku-20241022"  # 快速模型
  #   temperature: 0.5

  # fundamental_analysis:
  #   provider: "anthropic"
  #   id: "claude-opus-4-1-20250805"   # 强大模型
  #   temperature: 0.6

  # macro_analysis:
  #   provider: "openai"
  #   id: "gpt-4o"                     # OpenAI 模型
  #   temperature: 0.7

# Agent 配置
agents:
  technical_analysis:
    name: "技术分析师"
    role: "专注于股票技术分析，基于趋势和均线体系评估股票的技术面状态"
    markdown: true
    debug_mode: false

    tools:
      yfinance:
        enabled: true
        stock_price: true
        historical_prices: true
        stock_fundamentals: true
        cache_results: true

  macro_analysis:
    name: "宏观经济分析师"
    role: "专注于宏观经济数据分析、政策解读和经济周期研判，提供系统化的宏观环境分析"
    markdown: true
    debug_mode: false

    tools:
      tavily:
        enabled: false # AI 优化搜索（需要 API Key）
        max_results: 10
        topic: "news" # 宏观分析更关注新闻

      duckduckgo:
        enabled: true
        search: true
        news: true
        fixed_max_results: 10

      yfinance:
        enabled: true
        stock_price: true
        analyst_recommendations: true
        stock_fundamentals: true
        cache_results: true

      newspaper4k:
        enabled: true # 用于读取新闻文章全文

  fundamental_analysis:
    name: "基本面分析师"
    role: "专注于公司基本面深度分析，包括商业模式、财务健康度、估值和风险评估"
    markdown: true
    debug_mode: false

    tools:
      yfinance:
        enabled: true
        stock_price: true
        analyst_recommendations: true
        company_info: true
        company_news: true
        stock_fundamentals: true
        income_statements: true
        balance_sheet: true
        cash_flow: true
        cache_results: true

      tavily:
        enabled: false # AI 优化搜索（需要 API Key）
        max_results: 10
        topic: "general" # 基本面分析需要综合信息

      duckduckgo:
        enabled: true
        search: true
        news: true
        fixed_max_results: 10

      newspaper4k:
        enabled: true # 用于读取新闻文章全文

  team:
    name: "综合金融分析师团队"
    description: "协调基本面、技术面、宏观面分析，提供多维度的金融分析洞察"
    markdown: true
    debug_mode: false

    # Team Leader 自己的工具（用于快速搜索和验证信息）
    tools:
      tavily:
        enabled: false # Tavily: AI 优化的搜索引擎（推荐，需要 API Key）
        max_results: 5 # 最多返回 5 个结果
        topic: "general" # 搜索主题: "general" 或 "news"
        # 使用方法:
        #   1. 访问 https://tavily.com 获取 API Key
        #   2. export TAVILY_API_KEY="tvly-your-key-here"
        #   3. 设置 enabled: true

      duckduckgo:
        enabled: true # DuckDuckGo（免费搜索工具，无需 API Key）
        search: true
        news: true
        fixed_max_results: 5

      newspaper4k:
        enabled: true # 新闻全文阅读

    # 多轮对话配置
    history:
      enabled: true # 是否启用对话历史
      num_runs: 5 # 记住最近几轮对话（推荐3-10）
      # num_messages: null       # 或者记住最近几条消息（与 num_runs 二选一）

    members:
      - fundamental_analysis
      - technical_analysis
      - macro_analysis

# 系统配置
system:
  # API Keys（优先使用环境变量，这里是备用）
  openai_api_key: null # 环境变量 OPENAI_API_KEY
  anthropic_api_key: null # 环境变量 ANTHROPIC_API_KEY

  logging:
    level: "INFO"
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

  output:
    default_stream: true
    save_reports: false # 是否保存对话报告
    report_dir: "reports" # 报告保存目录，不存在会自动创建

  performance:
    cache_enabled: true
    timeout: 60
    max_retries: 3

# 分析配置
analysis:
  data_freshness:
    max_age_days: 90
    warn_age_days: 30

  defaults:
    include_technical: true
    include_fundamental: true
    include_macro: true
    time_range: "1y"

  report:
    include_disclaimer: true
    include_data_sources: true
    include_timestamp: true
    language: "zh-CN"
