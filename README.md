# é‡‘èåˆ†æå¤š Agent ç³»ç»Ÿ

åŸºäº [Agno](https://docs.agno.com) æ¡†æ¶æ„å»ºçš„ç»¼åˆé‡‘èåˆ†æç³»ç»Ÿï¼Œä½¿ç”¨å¤š Agent åä½œæ¨¡å¼æä¾›ä¸“ä¸šçš„é‡‘èåˆ†ææœåŠ¡ã€‚

## ğŸŒŸ ç‰¹æ€§

- **å¤šç»´åº¦åˆ†æ**ï¼šæ•´åˆåŸºæœ¬é¢ã€æŠ€æœ¯é¢ã€å®è§‚é¢ä¸‰ä¸ªç»´åº¦çš„ä¸“ä¸šåˆ†æ
- **æ™ºèƒ½åè°ƒ**ï¼šä¸» Agent æ™ºèƒ½è°ƒåº¦å­ Agentï¼Œè‡ªåŠ¨æ‹†è§£å¤æ‚é—®é¢˜
- **è¯æ®é©±åŠ¨**ï¼šæ‰€æœ‰åˆ†æåŸºäºæ•°æ®å’Œè¯æ®ï¼Œæ ‡æ³¨æ¥æºå’Œæ—¶æ•ˆæ€§
- **å®¢è§‚ä¸­ç«‹**ï¼šåªæä¾›åˆ†ææ´å¯Ÿï¼Œä¸æä¾›æŠ•èµ„å»ºè®®
- **é€šä¿—æ˜“æ‡‚**ï¼šå°†å¤æ‚çš„é‡‘èæ¦‚å¿µè½¬åŒ–ä¸ºæ˜“äºç†è§£çš„è¯­è¨€

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
ç»¼åˆé‡‘èåˆ†æå¸ˆå›¢é˜Ÿï¼ˆä¸» Agentï¼‰
â”œâ”€â”€ åŸºæœ¬é¢åˆ†æå¸ˆ
â”‚   â”œâ”€â”€ å•†ä¸šæ¨¡å¼åˆ†æ
â”‚   â”œâ”€â”€ è´¢åŠ¡å¥åº·åº¦è¯„ä¼°
â”‚   â”œâ”€â”€ ä¼°å€¼åˆ†æ
â”‚   â””â”€â”€ é£é™©è¯„ä¼°
â”œâ”€â”€ æŠ€æœ¯åˆ†æå¸ˆ
â”‚   â”œâ”€â”€ è¶‹åŠ¿åˆ¤æ–­ï¼ˆç„é“å‰‘æ³•ï¼‰
â”‚   â”œâ”€â”€ ä½ç½®è¯„ä¼°
â”‚   â””â”€â”€ å¼ºåº¦åˆ†æ
â””â”€â”€ å®è§‚ç»æµåˆ†æå¸ˆ
    â”œâ”€â”€ ç»æµæŒ‡æ ‡åˆ†æ
    â”œâ”€â”€ æ”¿ç­–è§£è¯»
    â”œâ”€â”€ ç»æµå‘¨æœŸç ”åˆ¤
    â””â”€â”€ æƒ…æ™¯æ¨æ¼”
```

## ğŸ“‹ Agent ä»‹ç»

### 1. ç»¼åˆé‡‘èåˆ†æå¸ˆï¼ˆä¸» Agentï¼‰

- **èŒè´£**ï¼šé—®é¢˜ç†è§£ã€ä»»åŠ¡æ‹†è§£ã€ç»“æœæ•´åˆã€æ´å¯Ÿæç‚¼
- **èƒ½åŠ›**ï¼šåè°ƒä¸‰ä½ä¸“ä¸šåˆ†æå¸ˆï¼Œæä¾›å¤šç»´åº¦ç»¼åˆåˆ†æ

### 2. åŸºæœ¬é¢åˆ†æå¸ˆ

- **ä¸“é•¿**ï¼šå…¬å¸æ·±åº¦ç ”ç©¶ã€è´¢åŠ¡åˆ†æã€ä¼°å€¼è¯„ä¼°
- **æ–¹æ³•è®º**ï¼šè¯æ®é©±åŠ¨ã€ä¸ƒæ­¥åˆ†ææ¡†æ¶
- **å·¥å…·**ï¼š
  - YFinanceï¼ˆè‚¡ç¥¨æ•°æ®ã€è´¢åŠ¡æŠ¥è¡¨ï¼‰
  - DuckDuckGoï¼ˆæ–°é—»æœç´¢ï¼‰
  - Newspaper4kï¼ˆæ–°é—»æ–‡ç« å…¨æ–‡é˜…è¯»ï¼‰âœ¨

### 3. æŠ€æœ¯åˆ†æå¸ˆ

- **ä¸“é•¿**ï¼šè¶‹åŠ¿åˆ¤æ–­ã€å‡çº¿åˆ†æã€ä½ç½®è¯„ä¼°
- **æ–¹æ³•è®º**ï¼šç„é“å‰‘æ³•ï¼ˆè¶‹åŠ¿+å‡çº¿ä½“ç³»ï¼‰
- **å·¥å…·**ï¼šYFinanceï¼ˆå†å²ä»·æ ¼æ•°æ®ï¼‰

### 4. å®è§‚ç»æµåˆ†æå¸ˆ

- **ä¸“é•¿**ï¼šå®è§‚æ•°æ®åˆ†æã€æ”¿ç­–è§£è¯»ã€ç»æµå‘¨æœŸç ”åˆ¤
- **æ–¹æ³•è®º**ï¼šåŒæ­¥æŒ‡æ ‡+é¢†å…ˆæŒ‡æ ‡+æƒ…æ™¯åˆ†æ
- **å·¥å…·**ï¼š
  - DuckDuckGoï¼ˆç»æµæ–°é—»æœç´¢ï¼‰
  - YFinanceï¼ˆå¸‚åœºæ•°æ®ï¼‰
  - Newspaper4kï¼ˆç»æµæ–°é—»å…¨æ–‡é˜…è¯»ï¼‰âœ¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

**ä¸€é”®å¯åŠ¨**ï¼ˆå¦‚æœå·²ç»é…ç½®å¥½ç¯å¢ƒï¼‰ï¼š

```bash
# 1. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.example.yaml config.yaml

# 2. ç¼–è¾‘é…ç½®ï¼Œè®¾ç½®ä½ çš„ API Key
vim config.yaml  # ä¿®æ”¹ api_key å­—æ®µ

# 3. è¿è¡Œç³»ç»Ÿ
uv run python main.py
```

### è¯¦ç»†æ­¥éª¤

### 1. ç¯å¢ƒè¦æ±‚

- Python >= 3.11
- [uv](https://github.com/astral-sh/uv) åŒ…ç®¡ç†å™¨

### 2. å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd autofxxk

# å®‰è£…ä¾èµ–
uv sync
```

### 3. åˆ›å»ºé…ç½®æ–‡ä»¶

ä»ç¤ºä¾‹é…ç½®æ–‡ä»¶åˆ›å»ºä½ è‡ªå·±çš„é…ç½®ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp config.example.yaml config.yaml
```

### 4. é…ç½® API Key

ç¼–è¾‘ `config.yaml`ï¼Œé…ç½®ä½ çš„ API Key å’Œæ¨¡å‹è®¾ç½®ï¼š

```bash
vim config.yaml
```

**æ–¹å¼ 1ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰**

```yaml
models:
  default:
    provider: "openai"              # æˆ– "anthropic", "anthropic-compatible"
    id: "gpt-4o"                    # æ¨¡å‹ ID
    api_key: "your-api-key-here"    # ä½ çš„ API Key
    base_url: null                  # ç¬¬ä¸‰æ–¹ API éœ€è¦è®¾ç½®
```

**æ–¹å¼ 2ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰**

```bash
# OpenAI
export OPENAI_API_KEY='your-openai-key-here'

# Anthropic
export ANTHROPIC_API_KEY='your-anthropic-key-here'
```

ç„¶ååœ¨ `config.yaml` ä¸­è®¾ç½®ï¼š
```yaml
models:
  default:
    provider: "openai"
    id: "gpt-4o"
    api_key: null  # ä»ç¯å¢ƒå˜é‡è¯»å–
```

### 5. å…¶ä»–é…ç½®ï¼ˆå¯é€‰ï¼‰

ä½ å¯ä»¥ä¿®æ”¹ `config.yaml` æ¥ï¼š
- âœ… æ›´æ¢æ¨¡å‹ï¼ˆOpenAIã€Anthropicã€ç¬¬ä¸‰æ–¹å…¼å®¹ APIï¼‰
- âœ… è°ƒæ•´ Agent è¡Œä¸ºï¼ˆæ¸©åº¦å‚æ•°ã€å·¥å…·é…ç½®ï¼‰
- âœ… é…ç½®å¤šè½®å¯¹è¯ï¼ˆå†å²è®°å½•ç®¡ç†ï¼‰
- âœ… è‡ªå®šä¹‰ç³»ç»Ÿè®¾ç½®ï¼ˆæ—¥å¿—ã€ç¼“å­˜ã€è¶…æ—¶ï¼‰

è¯¦ç»†é…ç½®è¯´æ˜è§ä¸‹æ–¹çš„ã€Œé…ç½®è¯´æ˜ã€ç« èŠ‚ã€‚

### 6. è¿è¡Œç³»ç»Ÿ

```bash
# äº¤äº’æ¨¡å¼ï¼ˆæ”¯æŒå¤šè½®å¯¹è¯ï¼‰
uv run python main.py

# æˆ–ç›´æ¥è¿è¡Œ
python main.py
```

**äº¤äº’æ¨¡å¼æ”¯æŒå¤šè½®å¯¹è¯**ï¼š
```
ğŸ‘¤ ä½ çš„é—®é¢˜: åˆ†æè‹¹æœå…¬å¸
ğŸ¤– [è¿”å›è‹¹æœå…¬å¸çš„ç»¼åˆåˆ†æ...]

ğŸ‘¤ ä½ çš„é—®é¢˜: å®ƒçš„ä¼°å€¼å¦‚ä½•ï¼Ÿ
ğŸ¤– [ä¼šè®°ä½ä¹‹å‰è¯´çš„æ˜¯è‹¹æœï¼Œè¿”å›è‹¹æœçš„ä¼°å€¼åˆ†æ...]

ğŸ‘¤ ä½ çš„é—®é¢˜: å’Œå¾®è½¯æ¯”å‘¢ï¼Ÿ
ğŸ¤– [ç»“åˆä¸Šä¸‹æ–‡ï¼Œå¯¹æ¯”è‹¹æœå’Œå¾®è½¯...]
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šä¸ªè‚¡ç»¼åˆåˆ†æ

```python
from agents import create_financial_analyst_team

# åˆ›å»ºå›¢é˜Ÿ
team = create_financial_analyst_team()

# è¿è¡Œåˆ†æ
response = team.run(
    input="åˆ†æä¸€ä¸‹è‹¹æœå…¬å¸(AAPL)çš„å½“å‰çŠ¶å†µï¼ŒåŒ…æ‹¬åŸºæœ¬é¢ã€æŠ€æœ¯é¢å’Œå®è§‚ç¯å¢ƒå¯¹å…¶çš„å½±å“"
)

print(response.content)
```

### ç¤ºä¾‹ 2ï¼šå¤šè½®å¯¹è¯

```python
from uuid import uuid4
from agents import create_financial_analyst_team

# åˆ›å»ºå›¢é˜Ÿ
team = create_financial_analyst_team()

# ä½¿ç”¨åŒä¸€ä¸ª session_id å®ç°å¤šè½®å¯¹è¯
session_id = str(uuid4())

# ç¬¬ä¸€è½®
response1 = team.run(
    input="åˆ†æè‹¹æœå…¬å¸",
    session_id=session_id
)
print(response1.content)

# ç¬¬äºŒè½®ï¼ˆä¼šè®°ä½ç¬¬ä¸€è½®çš„ä¸Šä¸‹æ–‡ï¼‰
response2 = team.run(
    input="å®ƒçš„è´¢åŠ¡çŠ¶å†µå¦‚ä½•ï¼Ÿ",
    session_id=session_id
)
print(response2.content)

# ç¬¬ä¸‰è½®ï¼ˆä¼šç»“åˆå‰ä¸¤è½®çš„ä¸Šä¸‹æ–‡ï¼‰
response3 = team.run(
    input="å’Œå¾®è½¯æ¯”å‘¢ï¼Ÿ",
    session_id=session_id
)
print(response3.content)
```

### ç¤ºä¾‹ 3ï¼šå®è§‚ç»æµåˆ†æ

```python
from agents import create_financial_analyst_team

team = create_financial_analyst_team()

response = team.run(
    message="å½“å‰ç¾å›½ç»æµå½¢åŠ¿å¦‚ä½•ï¼Ÿå¯¹è‚¡å¸‚æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"
)

print(response.content)
```

### ç¤ºä¾‹ 3ï¼šæŠ€æœ¯é¢åˆ†æ

```python
from agents import create_financial_analyst_team

team = create_financial_analyst_team()

response = team.run(
    message="è‹±ä¼Ÿè¾¾(NVDA)çš„æŠ€æœ¯é¢ç°åœ¨æ€ä¹ˆæ ·ï¼Ÿè¶‹åŠ¿å¦‚ä½•ï¼Ÿ"
)

print(response.content)
```

### ç¤ºä¾‹ 4ï¼šå•ç‹¬ä½¿ç”¨å­ Agent

```python
from agents import create_fundamental_analysis_agent

# åˆ›å»ºåŸºæœ¬é¢åˆ†æå¸ˆ
agent = create_fundamental_analysis_agent()

# ç›´æ¥ä½¿ç”¨
agent.print_response(
    "åˆ†æç‰¹æ–¯æ‹‰(TSLA)çš„è´¢åŠ¡å¥åº·åº¦å’Œä¼°å€¼æ°´å¹³",
    stream=True
)
```

## ğŸ¯ æ”¯æŒçš„åˆ†æç±»å‹

1. **ä¸ªè‚¡ç»¼åˆåˆ†æ**
   - ç¤ºä¾‹ï¼šåˆ†æç‰¹æ–¯æ‹‰çš„æŠ•èµ„ä»·å€¼
   - ä¼šè°ƒç”¨ï¼šåŸºæœ¬é¢åˆ†æå¸ˆ + æŠ€æœ¯åˆ†æå¸ˆ + å®è§‚åˆ†æå¸ˆ

2. **åŸºæœ¬é¢åˆ†æ**
   - ç¤ºä¾‹ï¼šè‹¹æœå…¬å¸çš„è´¢åŠ¡çŠ¶å†µå¦‚ä½•ï¼Ÿ
   - ä¼šè°ƒç”¨ï¼šåŸºæœ¬é¢åˆ†æå¸ˆ

3. **æŠ€æœ¯åˆ†æ**
   - ç¤ºä¾‹ï¼šè‹±ä¼Ÿè¾¾çš„æŠ€æœ¯é¢ç°åœ¨æ€ä¹ˆæ ·ï¼Ÿ
   - ä¼šè°ƒç”¨ï¼šæŠ€æœ¯åˆ†æå¸ˆ

4. **å®è§‚åˆ†æ**
   - ç¤ºä¾‹ï¼šå½“å‰ç¾å›½ç»æµå½¢åŠ¿å¦‚ä½•ï¼Ÿ
   - ä¼šè°ƒç”¨ï¼šå®è§‚ç»æµåˆ†æå¸ˆ

5. **è¡Œä¸šåˆ†æ**
   - ç¤ºä¾‹ï¼šç”µåŠ¨è½¦è¡Œä¸šçš„å‰æ™¯å¦‚ä½•ï¼Ÿ
   - ä¼šè°ƒç”¨ï¼šå®è§‚åˆ†æå¸ˆ + åŸºæœ¬é¢åˆ†æå¸ˆ

## ğŸ“š æ–¹æ³•è®ºå‚è€ƒ

### æŠ€æœ¯åˆ†æï¼šç„é“å‰‘æ³•

åŸºäºè¶‹åŠ¿å’Œå‡çº¿çš„åˆ†æä½“ç³»ï¼š

- **ä¸¤æ¡å…¬è®¾**ï¼šä»·æ ¼å›´ç»•ä»·å€¼æ³¢åŠ¨ã€é’Ÿæ‘†å¼è¿‡åº¦æ³¢åŠ¨
- **å¿ƒæ³•**ï¼šé¡ºå¤§åŠ¿é€†å°åŠ¿ï¼ˆå¤§é’Ÿæ‘†å‘ä¸Šï¼Œæ¥å°é’Ÿæ‘†å‘ä¸‹ï¼‰
- **ä¸‰ä¸ªåˆ¤æ–­**ï¼šè¶‹åŠ¿ã€ä½ç½®ã€å¼ºåº¦

### åŸºæœ¬é¢åˆ†æï¼šè¯æ®é©±åŠ¨

ä¸ƒæ­¥åˆ†ææ¡†æ¶ï¼š

1. è¡Œä¸šä¸å¤–éƒ¨ç¯å¢ƒ
2. å•†ä¸šæ¨¡å¼ä¸æŠ¤åŸæ²³
3. ç®¡ç†å±‚ä¸æ²»ç†
4. è´¢åŠ¡ä¸å¥åº·åº¦
5. ä¼°å€¼åˆ†æ
6. æŠ•èµ„é€»è¾‘
7. é£é™©è¯„ä¼°

### å®è§‚åˆ†æï¼šæƒ…æ™¯æ¨æ¼”

ç³»ç»ŸåŒ–åˆ†ææ¡†æ¶ï¼š

1. åŒæ­¥æŒ‡æ ‡ï¼ˆå½“å‰çŠ¶æ€ï¼‰
2. é¢†å…ˆæŒ‡æ ‡ï¼ˆé¢„è­¦ä¿¡å·ï¼‰
3. é€šèƒ€ç‰¹å¾åˆ†æ
4. æ”¿ç­–ç©ºé—´è¯„ä¼°
5. æƒ…æ™¯æ¨æ¼”ï¼ˆè½¯ç€é™†/è¡°é€€/è¶…å¼ºéŸ§æ€§ï¼‰
6. èµ„äº§å½±å“é€»è¾‘

## âš ï¸ é‡è¦å£°æ˜

**æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚**

- âŒ ä¸æä¾›ä¹°å–å»ºè®®
- âŒ ä¸æä¾›ç›®æ ‡ä»·
- âŒ ä¸æä¾›ä»“ä½å»ºè®®
- âŒ ä¸åšç¡®å®šæ€§é¢„æµ‹
- âœ… åªæä¾›å®¢è§‚åˆ†æå’Œæ´å¯Ÿ
- âœ… åŸºäºè¯æ®å’Œæ•°æ®
- âœ… æ ‡æ³¨æ¥æºå’Œæ—¶æ•ˆæ€§
- âœ… æ˜ç¡®ä¸ç¡®å®šæ€§å’Œé£é™©

## âš™ï¸ é…ç½®è¯´æ˜

ç³»ç»Ÿä½¿ç”¨ `config.yaml` è¿›è¡Œé…ç½®ç®¡ç†ï¼Œæ”¯æŒï¼š

### é…ç½®å†…å®¹
- âœ… æ¨¡å‹é€‰æ‹©ï¼ˆæ”¯æŒ OpenAIã€Anthropicã€å…¼å®¹ OpenAI API çš„æ¨¡å‹ï¼‰
- âœ… Agent è¡Œä¸ºï¼ˆæ¸©åº¦å‚æ•°ã€è¾“å‡ºæ ¼å¼ï¼‰
- âœ… å·¥å…·é…ç½®ï¼ˆå¯ç”¨/ç¦ç”¨ã€å‚æ•°è°ƒæ•´ï¼‰
- âœ… å¤šè½®å¯¹è¯ï¼ˆå†å²è®°å½•ç®¡ç†ï¼‰
- âœ… **Cache ä¼˜åŒ–**ï¼ˆPrompt Caching å¯èŠ‚çœ 90% token æˆæœ¬ï¼‰âœ¨
- âœ… ç³»ç»Ÿè®¾ç½®ï¼ˆæ—¥å¿—ã€ç¼“å­˜ã€è¶…æ—¶ï¼‰

### å¸¸è§é…ç½®åœºæ™¯

**ä½¿ç”¨ Anthropic Claude**ï¼š
```yaml
models:
  default:
    provider: "anthropic"
    id: "claude-sonnet-4-20250514"
    max_tokens: 8192
```

**å¯ç”¨ Prompt Caching**ï¼ˆå¼ºçƒˆæ¨èï¼ŒèŠ‚çœ 90% æˆæœ¬ï¼‰ï¼š
```yaml
models:
  default:
    provider: "anthropic"  # æˆ– "anthropic-compatible"
    id: "claude-sonnet-4-20250514"
    cache_system_prompt: true  # å¯ç”¨ prompt caching âœ¨
```

> ğŸ’¡ **æç¤º**ï¼šç³»ç»Ÿå·²ä½¿ç”¨ `add_datetime_to_context=True` æ¥æä¾›æ—¥æœŸä¿¡æ¯ï¼Œä¸ä¼šå½±å“ cache æ•ˆæœã€‚
> æ—¥æœŸä¿¡æ¯ä¼šè‡ªåŠ¨æ·»åŠ åˆ°ç”¨æˆ·æ¶ˆæ¯ä¸­ï¼Œè€Œç³»ç»Ÿæç¤ºè¯ä¿æŒé™æ€ï¼Œå¯ä»¥è¢«å®Œç¾ç¼“å­˜ã€‚

**å¯ç”¨å¤šè½®å¯¹è¯**ï¼ˆè®°ä½ä¸Šä¸‹æ–‡ï¼‰ï¼š
```yaml
agents:
  team:
    history:
      enabled: true      # å¯ç”¨å¯¹è¯å†å²
      num_runs: 5        # è®°ä½æœ€è¿‘5è½®å¯¹è¯
      # num_messages: 20 # æˆ–è€…è®°ä½æœ€è¿‘20æ¡æ¶ˆæ¯
```

**é™ä½æˆæœ¬**ï¼ˆä½¿ç”¨ GPT-3.5-Turbo æˆ– Claude Haikuï¼‰ï¼š
```yaml
models:
  default:
    provider: "openai"
    id: "gpt-3.5-turbo"
  # æˆ–ä½¿ç”¨ Claude Haiku
  # provider: "anthropic"
  # id: "claude-3-5-haiku-20241022"
```

**æ··åˆä½¿ç”¨å¤šç§æ¨¡å‹**ï¼š
```yaml
models:
  technical_analysis:
    provider: "anthropic"
    id: "claude-3-5-haiku-20241022"  # å¿«é€Ÿ
  
  fundamental_analysis:
    provider: "anthropic"
    id: "claude-opus-4-1-20250805"  # æ·±åº¦
  
  macro_analysis:
    provider: "openai"
    id: "gpt-4o"  # å¹³è¡¡
```

**ä½¿ç”¨å…¼å®¹ OpenAI API çš„æœ¬åœ°æ¨¡å‹**ï¼š
```yaml
models:
  default:
    provider: "openai-compatible"
    id: "your-model"
    base_url: "http://localhost:8000/v1"
```

## ğŸ“„ License

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [Agno](https://docs.agno.com) æä¾›å¼ºå¤§çš„å¤š Agent æ¡†æ¶ã€‚
